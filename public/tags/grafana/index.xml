<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>grafana on</title><link>https://yezihack.github.io/tags/grafana/</link><description>Recent content in grafana on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 24 Sep 2021 17:05:06 +0800</lastBuildDate><atom:link href="https://yezihack.github.io/tags/grafana/index.xml" rel="self" type="application/rss+xml"/><item><title>Prometheus: Grafana 监控 Node Exporter 主机</title><link>https://yezihack.github.io/posts/node-exporter/</link><pubDate>Fri, 24 Sep 2021 17:05:06 +0800</pubDate><guid>https://yezihack.github.io/posts/node-exporter/</guid><description>node_exporter 安装 监控远程 linux 服务器CPU、内存、磁盘、I/O等信息
下载慢，请查看软件下载列表
https://prometheus.io/download/
cd /usr/local/src
wget https://github.com/prometheus/node_exporter/releases/download/v1.0.1/node_exporter-1.0.1.linux-amd64.tar.gz
tar -zxvf node_exporter-1.0.1.linux-amd64.tar.gz -C /usr/local/
cd /usr/local/
mv node_exporter-1.0.1.linux-amd64 node_exporter
cd node_exporter 运行 先创建 systemd 服务
cat &amp;gt; /usr/lib/systemd/system/node_exporter.service &amp;lt;&amp;lt; EOF
[Unit]
Description=node_exporter
Documentation=https://prometheus.io/
After=network.target
[Service]
Type=simple
User=root
ExecStart=/usr/local/node_exporter/node_exporter
KillMode=process
Restart=on-failure
RestartSec=10s
[Install]
WantedBy=multi-user.target
EOF 刷新 systemd &amp;amp;&amp;amp; 运行 &amp;amp;&amp;amp; 查看
systemctl daemon-reload # 刷新 systemd 配置
systemctl enable node_exporter # 加入开机启动
systemctl start node_exporter # 启动服务 systemctl status node_exporter # 查看详情 预览 http://192.</description></item><item><title>Prometheus: 安装</title><link>https://yezihack.github.io/posts/prometheus-install/</link><pubDate>Fri, 24 Sep 2021 17:04:51 +0800</pubDate><guid>https://yezihack.github.io/posts/prometheus-install/</guid><description>.1. 安装 .1.1. 下载 .1.2. 运行 .1.3. 预览 .1.4. nginx 反向代理 .2. Docker 安装 .3. 关于作者 .1. 安装 .1.1. 下载 prometheus提供二进制,直接解压即可用.由 go 编写
官网下载: https://prometheus.io/download/
Centos 64x 选择下载 *linux-amd64.tar.gz
wget -c https://github.com/prometheus/prometheus/releases/download/v2.18.1/prometheus-2.18.1.darwin-amd64.tar.gz tar -xvf prometheus-2.18.1.darwin-amd64.tar.gz -C /usr/local/ .1.2. 运行 创建 systemd 服务
--config.file 配置文件 --storage.tsdb.retention 数据保留多少天 --query.max-concurrency 最大并发数 --storage.tsdb.path 数据存储位置 --web.max-connections 最大连接数 cat &amp;gt; /usr/lib/systemd/system/prometheus.service &amp;lt;&amp;lt; EOF [Unit] Description=Prometheus Documentation=https://prometheus.io/ After=network.target [Service] Type=simple ExecStart=/usr/local/prometheus/prometheus \\ --config.file=/usr/local/prometheus/prometheus.yml \\ --web.read-timeout=5m \\ --web.</description></item><item><title>Prometheus: Grafana 监控 Ngnix</title><link>https://yezihack.github.io/posts/ngnix-exporter/</link><pubDate>Fri, 06 Nov 2020 17:41:55 +0800</pubDate><guid>https://yezihack.github.io/posts/ngnix-exporter/</guid><description>.1. 概述 .2. 安装 nginx-module-vts 模块 .2.1. 下载 nginx-module-vts 模块文件 .2.2. 重新编译 nginx .2.3. 配置 server 信息 .3. 安装 nginx-vts-exporter .3.1. 下载软件 .3.2. 解压&amp;amp;安装 .3.3. 制作 systemctl .3.4. 管理 nginx-exporter .3.5. 查看 metrics .4. 添加到 prometheus 数据源 .5. MySQL Over 图表安装 .1. 概述 Prometheus 监控 nginx 需要用到两个模块
nginx-module-vts 主要用于收集 nginx 各项指标.能提供 json 数据 nginx-vts-exporter 向 prometheus 提供可以识别的数据结构 .2. 安装 nginx-module-vts 模块 需要对 nginx 进行重新编译, 对于正在运行的 nginx 需要热启动, 谨慎操作.
.2.1. 下载 nginx-module-vts 模块文件 cd /usr/local/src git clone https://github.</description></item><item><title>Prometheus: Grafana 监控 MySQL</title><link>https://yezihack.github.io/posts/mysqld_exporter/</link><pubDate>Wed, 02 Sep 2020 11:02:44 +0800</pubDate><guid>https://yezihack.github.io/posts/mysqld_exporter/</guid><description>mysqld_exporter 安装 下载慢，请查看软件下载列表
https://prometheus.io/download/
cd /usr/local/src/ wget https://github.com/prometheus/mysqld_exporter/releases/download/v0.12.1/mysqld_exporter-0.12.1.darwin-amd64.tar.gz tar -zxvf mysqld_exporter-0.12.1.darwin-amd64.tar.gz -C /usr/local/ mv /usr/local/mysqld_exporter-0.12.1.darwin-amd64 /usr/local/mysqld_exporter 创建 .my.cnf 文件
host 主机地址 user mysql名称 password mysql密码 cat &amp;gt; /usr/local/mysqld_exporter/.my.cnf &amp;lt;&amp;lt; EOF [client] host=127.0.0.1 user=root password=root EOF 创建 systemd 服务
cat &amp;gt; /lib/systemd/system/mysqld_exporter.service &amp;lt;&amp;lt; EOF [Unit] Description=mysqld_exporter Documentation=https://prometheus.io/ After=network.target [Service] Type=simple User=root ExecStart=/usr/local/mysqld_exporter/mysqld_exporter --config.my-cnf=/usr/local/mysqld_exporter/.my.cnf KillMode=process Restart=on-failure RestartSec=10s [Install] WantedBy=multi-user.target EOF 启动 systemctl daemon-reload systemctl start mysqld_exporter systemctl status mysqld_exporter 验证 metrics
显示有数据则表示已经采集到数据啦。</description></item><item><title>Prometheus: Grafana 入门</title><link>https://yezihack.github.io/posts/grafana/</link><pubDate>Mon, 31 Aug 2020 20:29:51 +0800</pubDate><guid>https://yezihack.github.io/posts/grafana/</guid><description>.1. 简介 Grafana是一个开源的度量分析和可视化工具，可以通过将采集的数据分 析，查询，然后进行可视化的展示,并能实现报警
官网：https://grafana.com/ .2. 源码安装 官方最新版本下载：https://grafana.com/grafana/download
# 下载 cd /usr/local/src wget https://dl.grafana.com/oss/release/grafana-7.1.5.linux-amd64.tar.gz wget https://dl.grafana.com/oss/release/grafana-9.0.0.linux-amd64.tar.gz # 解压 tar -zxvf /grafana-7.1.5.linux-amd64.tar.gz -C /usr/local # 重命名文件夹 grafana mv /usr/local/grafana-7.1.5.linux-amd64 /usr/local/grafana .3. RPM 方式安装 wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.0.0-1.x86_64.rpm sudo yum install grafana-enterprise-9.0.0-1.x86_64.rpm sudo systemctl daemon-reload sudo systemctl start grafana-server sudo systemctl status grafana-server sudo systemctl enable grafana-server 创建 systemd 服务
-homepath grafana的工作目录。 cat &amp;gt; /lib/systemd/system/grafana.service &amp;lt;&amp;lt; EOF [Unit] Description=Grafana Documentation=https://grafana.com/ After=network.target [Service] Type=notify ExecStart=/usr/local/grafana/bin/grafana-server -homepath /usr/local/grafana/ Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.</description></item><item><title>Prometheus: 入门</title><link>https://yezihack.github.io/posts/prometheus/</link><pubDate>Mon, 31 Aug 2020 10:59:18 +0800</pubDate><guid>https://yezihack.github.io/posts/prometheus/</guid><description>基于 CentOS 7 amd64 系统
Prometheus 多维数据模型（有metric名称和键值对确定的时间序列） 灵活的查询语言 不依赖分布式存储 通过pull方式采集时间序列，通过http协议传输 支持通过中介网关的push时间序列的方式 监控数据通过服务或者静态配置来发现 支持图表和dashboard等多种方式 组件： Prometheus 主程序，主要是负责存储、抓取、聚合、查询方面。 Alertmanager 程序，主要是负责实现报警功能。 Pushgateway 程序，主要是实现接收由Client push过来的指标数据，在指定的时间间隔，由主程序来抓取。 node_exporter 监控远程 linux 服务器CPU、内存、磁盘、I/O等信息 生态架构图 普罗米修斯的体系结构及其一些生态系统组件
https://prometheus.io/docs/introduction/overview/
工作流程
Prometheus 服务器定期从配置好的 jobs 或者 exporters 中获取度量数据；或者接收来自推送网关发送过来的 度量数据。 Prometheus 服务器在本地存储收集到的度量数据，并对这些数据进行聚合； 运行已定义好的 alert.rules，记录新的时间序列或者向告警管理器推送警报。 告警管理器根据配置文件，对接收到的警报进行处理，并通过email等途径发出告警。 Grafana等图形工具获取到监控数据，并以图形化的方式进行展示。 Client Library 提供度量的四种类型 Counter 类型： 计数器。 是一个累计的指标，代表一个单调递增的计数器，它的值只会增加或在重启时重置为零。 一般用于记录访问数，错误数，任务数等 Gauge 类型：计量器。 是代表一个数值类型的指标，它的值可以增或减 如CPU的负载，协程数，并发请求量，内存使用量等 Histogram 柱状图 是一种累积直方图，在一段时间范围内对数据进行采样，并将其计入可配置的存储桶（bucket）中。 histogram并不会保存数据采样点值，每个bucket只有记录样本数的counter,即histogram存储是区间的样本数据统计值。 如请求持续时间或响应大小等。 Summary 摘要 是对百分数进行统计的。 即在一段时间内（默认10分钟）的每个采样点进行统计，并形成分位图 （如：正态分布一样，统计低于60分不及格的同学比例，统计低于80分的同学比例，统计低于95分的同学比例） 参考 文档下载 官方文档 非官方中文文档 CentOS7.5 Prometheus2.</description></item></channel></rss>