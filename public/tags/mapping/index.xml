<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>mapping on</title><link>https://yezihack.github.io/tags/mapping/</link><description>Recent content in mapping on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 23 Jul 2020 19:49:49 +0800</lastBuildDate><atom:link href="https://yezihack.github.io/tags/mapping/index.xml" rel="self" type="application/rss+xml"/><item><title>Elasticsearch Mapping学习</title><link>https://yezihack.github.io/posts/es-mapping/</link><pubDate>Thu, 23 Jul 2020 19:49:49 +0800</pubDate><guid>https://yezihack.github.io/posts/es-mapping/</guid><description>Mapping的定义 可以对索引的数据字段设置类型, 还可以设置不变索引.也就是说不被搜索到.
PUT users {
&amp;#34;mappings&amp;#34;: {
&amp;#34;properties&amp;#34;: {
&amp;#34;firstName&amp;#34;:{
&amp;#34;type&amp;#34;: &amp;#34;text&amp;#34;
},
&amp;#34;lastName&amp;#34;:{
&amp;#34;type&amp;#34;: &amp;#34;text&amp;#34;
},
&amp;#34;mobile&amp;#34;:{
&amp;#34;type&amp;#34;: &amp;#34;text&amp;#34;,
&amp;#34;index&amp;#34;: false # 设置不变索引的字段
}
}
}
} 结果
{
&amp;#34;acknowledged&amp;#34; : true,
&amp;#34;shards_acknowledged&amp;#34; : true,
&amp;#34;index&amp;#34; : &amp;#34;users&amp;#34;
} 添加真实数据.
PUT users/_doc/1
{
&amp;#34;firstName&amp;#34;:&amp;#34;sg&amp;#34;,
&amp;#34;lastName&amp;#34;:&amp;#34;foot&amp;#34;,
&amp;#34;mobile&amp;#34;:&amp;#34;123&amp;#34;
} 对已经禁止索引的mobile字段查询
POST /users/_search
{
&amp;#34;query&amp;#34;: {
&amp;#34;match&amp;#34;: {
&amp;#34;mobile&amp;#34;: &amp;#34;123&amp;#34;
}
}
} 结果显示报错是:
{
&amp;#34;error&amp;#34; : {
&amp;#34;root_cause&amp;#34; : [
{
&amp;#34;type&amp;#34; : &amp;#34;query_shard_exception&amp;#34;,
&amp;#34;reason&amp;#34; : &amp;#34;failed to create query: Cannot search on field [mobile] since it is not indexed.</description></item></channel></rss>