<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><script defer language=javascript type=text/javascript src=/js/bundle.min.14549c76bbc96f0af1574b0259efd70e52908cd36fb4d14ed3d290a1b6479eae.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><title itemprop=name>空树之空</title><meta property="og:title" content="空树之空"><meta name=twitter:title content="空树之空"><meta itemprop=name content="空树之空"><meta name=application-name content="空树之空"><meta property="og:site_name" content="空树之空"><meta name=description content="《空樹之空》博客是一个技术导向的平台，聚焦于Kubernetes、DevOps和Linux等领域。通过简洁而优美的文字，我们提供对这些技术主题的深入探索和实用的指南。"><meta itemprop=description content="《空樹之空》博客是一个技术导向的平台，聚焦于Kubernetes、DevOps和Linux等领域。通过简洁而优美的文字，我们提供对这些技术主题的深入探索和实用的指南。"><meta property="og:description" content="《空樹之空》博客是一个技术导向的平台，聚焦于Kubernetes、DevOps和Linux等领域。通过简洁而优美的文字，我们提供对这些技术主题的深入探索和实用的指南。"><meta name=twitter:description content="《空樹之空》博客是一个技术导向的平台，聚焦于Kubernetes、DevOps和Linux等领域。通过简洁而优美的文字，我们提供对这些技术主题的深入探索和实用的指南。"><base href=https://yezihack.github.io/><link rel=canonical href=https://yezihack.github.io/ itemprop=url><meta name=url content="https://yezihack.github.io/"><meta name=twitter:url content="https://yezihack.github.io/"><meta property="og:url" content="https://yezihack.github.io/"><meta property="og:updated_time" content="29012-29-03T1244:25:23+0800"><link rel=sitemap type=application/xml title=Sitemap href=https://yezihack.github.io/sitemap.xml><link href=https://yezihack.github.io/index.xml rel=alternate type=application/rss+xml title=空树之空><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=twitter:site content><meta name=twitter:creator content><meta property="fb:admins" content><meta name=apple-mobile-web-app-title content="空树之空"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta property="og:type" content="website"><meta name=author content><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"空树之空","author":{"@type":"Person","name":""},"datePublished":"2023-12-29","description":"","wordCount":"0","mainEntityOfPage":"True","dateModified":"2023-12-29","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"空树之空","logo":{"@type":"imageObject","url":""}}}</script><meta name=generator content="Hugo 0.114.0"><link type=text/css rel=stylesheet href=/css/bundle.min.aa949ea27ee9836d60d6ea4c073fd0885f51948c7eea0247da6b1aff4bc25c44.css><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5a5a5a;--link-color:#268bd2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#bf616a;--code-background-color:#E5E5E5;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#eee;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9d9d9d;--link-color:#268bd2;--date-color:#9a9a9a;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#ff7f7f;--code-background-color:#393D47}body{background-color:var(--bkg-color)}</style></head><body class=dark-theme><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://yezihack.github.io/><img src=/images/head.jpg alt="brand image"></a>
<a href=https://yezihack.github.io/><h1>空树之空</h1></a></h1><p class=lead>《空樹之空》博客是一个技术导向的平台，聚焦于Kubernetes、DevOps和Linux等领域。通过简洁而优美的文字，我们提供对这些技术主题的深入探索和实用的指南。</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/>About</a></li><li class=heading><a href=/posts/>Posts</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=https://yezihack.github.io/posts/firewalld/>Linux Firewalld 极简教程</a></li><li class=bullet><a href=https://yezihack.github.io/posts/chronyd/>Linux Chronyd 极简教程</a></li><li class=bullet><a href=https://yezihack.github.io/posts/helm-command/>Helm 常用命令</a></li><li class=bullet><a href=https://yezihack.github.io/posts/helm-template/>Helm Chart 模板</a></li><li class=bullet><a href=https://yezihack.github.io/posts/helm-tutorial/>Helm 入门学习</a></li><li class=heading><a href=/tags/>Tags</a></li></ul></nav><a target=_blank class=social title="RSS Feed" href=https://yezihack.github.io//posts/index.xml><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote><br>&copy; 2023 百里江山. All rights reserved.</p></div></aside><main class="content container"><div class=posts><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/benchmark/>pprof火焰图分析利器之压测</a></h1><time datetime=2020-06-09T11:21:11+0800 class=post-date>June 9, 2020</time><ul class=tags><li class=tag-golang><a href=https://yezihack.github.io/tags/golang>golang</a></li><li class=tag-bench><a href=https://yezihack.github.io/tags/bench>bench</a></li><li class=tag-pprof><a href=https://yezihack.github.io/tags/pprof>pprof</a></li><li class=tag-go压测><a href=https://yezihack.github.io/tags/go%E5%8E%8B%E6%B5%8B>go压测</a></li><li class=tag-go性能><a href=https://yezihack.github.io/tags/go%E6%80%A7%E8%83%BD>go性能</a></li><li class=tag-测试><a href=https://yezihack.github.io/tags/%E6%B5%8B%E8%AF%95>测试</a></li></ul></div>Benchmark 新建测试文件 util.go文件
func GetMd5V(s string) string {
h := md5.New()
h.Write([]byte(s))
return hex.EncodeToString(h.Sum(nil))
}
func SumMd5(s string) string {
data := []byte(s)
return fmt.Sprintf("%x", md5.Sum(data))
} 以_test结尾的文件, 如util_test.go
func BenchmarkSumMd5(b *testing.B) {
for i := 0; i &lt; b.N; i++ {
SumMd5("1")
}
}
func BenchmarkGetMd5V(b *testing.B) {
for i := 0; i &lt; b.N; i++ {
GetMd5V("1")
}
} 运行Benchmark函数 go test -bench="." -benchmem 输出结果 BenchmarkSumMd5-8 1719777 847 ns/op 64 B/op 3 allocs/op
BenchmarkGetMd5V-8 1861362 644 ns/op 184 B/op 5 allocs/op
PASS
ok openapi/app/util 4.<div class=read-more-link><a href=/posts/benchmark/>Read More…</a></div></article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/pprof/>pprof火焰图性能分析利器之入门</a></h1><time datetime=2020-06-05T19:16:31+0800 class=post-date>June 5, 2020</time><ul class=tags><li class=tag-golang><a href=https://yezihack.github.io/tags/golang>golang</a></li><li class=tag-pprof><a href=https://yezihack.github.io/tags/pprof>pprof</a></li><li class=tag-性能分析><a href=https://yezihack.github.io/tags/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90>性能分析</a></li><li class=tag-火焰图><a href=https://yezihack.github.io/tags/%E7%81%AB%E7%84%B0%E5%9B%BE>火焰图</a></li></ul></div>前言 如果你的应用是一直运行的，比如 web 应用，那么可以使用 net/http/pprof 库，它能够在提供 HTTP 服务进行分析。而非一直运行的程序可以使用 runtime/pprof 库
可以先看下pprof入门
go1.10自带 go tool pprof工具
go version 查看golang版本
安装 引用包_ "net/http/pprof"
内置包的路径: net\http\pprof\pprof.go
const (
PProfPort = 6060 // 端口
)
func PprofServer() {
runtime.SetMutexProfileFraction(1) // 开启对锁调用的跟踪
runtime.SetBlockProfileRate(1) // 开启对阻塞操作的跟踪
go func() {
err := http.ListenAndServe(fmt.Sprintf(":%d", PProfPort), nil)
if err != nil {
zlog.Warn().Err(err).Msg("BootPprof")
}
}()
}
func main() {
PprofServer()
select{}
} 浏览器查看 allocs 查看内存分配详情 block 同步原语阻塞的堆栈跟踪 cmdline 当前程序运行的参数 goroutine 所有当前goroutines的堆栈跟踪 heap 活动对象的内存分配的抽样 mutex 争用互斥锁的持有者的堆栈跟踪 profile CPU配置文件, 还可以使用go tool pprof 查看某时间段的cpu情况, 并生成火焰图 go tool pprof http://localhost:6060/debug/pprof/profile?<div class=read-more-link><a href=/posts/pprof/>Read More…</a></div></article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/jmeter/>Jmeter入门</a></h1><time datetime=2020-06-05T16:45:52+0800 class=post-date>June 5, 2020</time><ul class=tags><li class=tag-jmeter><a href=https://yezihack.github.io/tags/jmeter>jmeter</a></li><li class=tag-测试><a href=https://yezihack.github.io/tags/%E6%B5%8B%E8%AF%95>测试</a></li><li class=tag-压测><a href=https://yezihack.github.io/tags/%E5%8E%8B%E6%B5%8B>压测</a></li></ul></div>安装 参考 https://blog.csdn.net/pengjiangchun/article/details/105419683
使用 切换成中文 新建"线程组" 配置"线程组" 设置Cookie Http请求 Http断言 填写请求的URl 填写报告 参考 https://zhuanlan.zhihu.com/p/142897766 https://blog.csdn.net/pengjiangchun/article/details/105419683</article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/select/>golang select用法</a></h1><time datetime=2020-06-05T10:59:18+0800 class=post-date>June 5, 2020</time><ul class=tags><li class=tag-golang><a href=https://yezihack.github.io/tags/golang>golang</a></li><li class=tag-select><a href=https://yezihack.github.io/tags/select>select</a></li><li class=tag-chan><a href=https://yezihack.github.io/tags/chan>chan</a></li></ul></div>select 用于chan通道专用的控制结构
ch := make(chan bool)
select {
case c &lt;- ch:
fmt.Println("hello world")
default:
return
} 使用误区 39行, return 会一直阻塞? 希望大神解释下? 答: return相当于返回,不再继续,将永远阻塞,直到主程序退出.一般用于结束这个goroutine才加上return,否则不要轻易使用. 如果return 换成break或continue就不会阻塞 package main
import (
"fmt"
"github.com/gin-gonic/gin"
"log"
"math/rand"
"sync"
)
type Cache struct {
ch chan int
}
var (
_cache *Cache
_once sync.Once
)
func NewCache() *Cache {
_once.Do(func() {
_cache = &amp;Cache{
ch: make(chan int, 10),
}
_cache.monitor()
})
return _cache
}
func (c *Cache) Push(x int) {
c.<div class=read-more-link><a href=/posts/select/>Read More…</a></div></article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/shell/>Shell运算符</a></h1><time datetime=2020-06-04T11:03:14+0800 class=post-date>June 4, 2020</time><ul class=tags><li class=tag-linux><a href=https://yezihack.github.io/tags/linux>linux</a></li><li class=tag-shell><a href=https://yezihack.github.io/tags/shell>shell</a></li><li class=tag-运算符><a href=https://yezihack.github.io/tags/%E8%BF%90%E7%AE%97%E7%AC%A6>运算符</a></li></ul></div>运算符 算术运算符 八种运算符号 +, -, *, /, %, =, ==, !=
采用此表达式: `expr $a + $b` 计算加法, 其它类似
数字判断相等: [ $a == $b ] 数字判断不相等: [ $a != $b ] 乘号比较特殊: val=`expr $a \* $b` 需要加\才能运算
不使用expr, 可以使用$((表达式))代替
例: a=10
b=20
val=`expr $a + $b`
echo "a + b : $val" 关系运算符 关系运算符只支持数字, 不支持字符串,除非字符串是数字
六种运算符号
-eq 判断左边等于右边
-ne 判断左边不相等右边
-gt 判断左边大于右边
-lt 判断左边小于右边
-ge 判断左边大于等于右边
-le 判断左边小于等于右边
例: a=10
b=20
if [ $a -eq $b ]; then
echo "a与b相等"
else
echo "a与b不相等"
fi 布尔运算符 共三种符号: !<div class=read-more-link><a href=/posts/shell/>Read More…</a></div></article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/supervisor/>Supervisor进程守护工具</a></h1><time datetime=2020-05-27T14:46:37+0800 class=post-date>May 27, 2020</time><ul class=tags><li class=tag-supervisor><a href=https://yezihack.github.io/tags/supervisor>supervisor</a></li><li class=tag-进程守护><a href=https://yezihack.github.io/tags/%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4>进程守护</a></li><li class=tag-工具><a href=https://yezihack.github.io/tags/%E5%B7%A5%E5%85%B7>工具</a></li><li class=tag-linux><a href=https://yezihack.github.io/tags/linux>linux</a></li></ul></div>介绍 supervisor是python写的一个进程守护工具,非常实用,时时监听你的进程是否正常, 发现异常自动启动, 生产环境必备软件.
安装 CentOS Yum安装 #!/bin/bash
yum install -y epel-release # 依赖
yum install -y supervisor # 安装
systemctl enable supervisord # 开机自启动
systemctl start supervisord # 启动supervisord服务
systemctl status supervisord # 查看supervisord服务状态
ps -ef|grep supervisord # 查看是否存在supervisord进程 离线安装 参考: https://segmentfault.com/a/1190000011696023 基础 supervisord 启动工具 echo_supervisord_conf 生成配置工具 supervisorctl 管理进程工具 /etc/supervisor.conf 默认配置工具路径 /etc/supervisord.d/ 配置工具目录 supervisorctl 命令使用 status 查看状态 reload 重启所有服务 update 更新 stop [进程名] start [进程名] restart [进程名] supervisor.conf配置 vim /etc/supervisor.<div class=read-more-link><a href=/posts/supervisor/>Read More…</a></div></article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/go-package/>Go Package优秀的包</a></h1><time datetime=2020-05-13T14:40:23+0800 class=post-date>May 13, 2020</time><ul class=tags><li class=tag-golang><a href=https://yezihack.github.io/tags/golang>golang</a></li><li class=tag-分享><a href=https://yezihack.github.io/tags/%E5%88%86%E4%BA%AB>分享</a></li><li class=tag-golang库><a href=https://yezihack.github.io/tags/golang%E5%BA%93>golang库</a></li><li class=tag-go><a href=https://yezihack.github.io/tags/go>go</a></li></ul></div>Go 资源汇总 文件 微服务 缓存 日志&调试 池 WEB框架 测试框架 配置 唯一ID 网络 工具包 Go 资源汇总 收集的资源大而全，提供更多选择，更大视野。
Github 描述 go-awesome Go 语言优秀资源整理 Golang Go 资料包 awesome-go-cn Go 资源列表 文件 pkg 文档 描述 fsnotify 用法 监听文件修改进而自动重新加载 微服务 pkg 文档 描述 ratelimit 漏桶率限制算法 Jaeger 分布式追踪系统 hystrix-go 流量控制,熔断,容错,隔离功能 缓存 pkg 文档 描述 cache2go go 进程内缓存 golang-lru 实现LRU缓存策略 日志&调试 pkg 文档 描述 errors 错误处理 zerolog 零拷贝日志 池 pkg 文档 描述 grpool 轻量级协程池 ants 协程池 WEB框架 pkg 文档 描述 gin web 高效框架 测试框架 pkg 文档 描述 goConvey 单元测试框架, 自带 Web 界面 配置 pkg 文档 描述 ini ini 配置文件 gjson 用法 用于读取 JSON 串 sjson 用法 用于设置 JSON 串 唯一ID pkg 文档 描述 uuid uuid 码 sonyflake sony 雪花算法 xid 全局唯一ID生成器 20个字符长度 网络 pkg 文档 描述 ping go ping 包 工具包 pkg 文档 描述 cron 用法 定时器 by linux crontab endless 优雅重启 go 程序 com 工具包 cast 全类型转换 gopass 交互模式输入密码 cobra 命令行框架, spf13大神出品 go-humanize 各种数字的人性化转换</article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/share-5month/>2020年5月份的分享</a></h1><time datetime=2020-05-13T12:47:13+0800 class=post-date>May 13, 2020</time><ul class=tags><li class=tag-share><a href=https://yezihack.github.io/tags/share>share</a></li><li class=tag-限流><a href=https://yezihack.github.io/tags/%E9%99%90%E6%B5%81>限流</a></li><li class=tag-排版><a href=https://yezihack.github.io/tags/%E6%8E%92%E7%89%88>排版</a></li><li class=tag-分享><a href=https://yezihack.github.io/tags/%E5%88%86%E4%BA%AB>分享</a></li></ul></div>2020.05.13 第1期 Golang 标准库限流器 time/rate 实现剖析 Makedown排版 中文文案排版指北 技术文章配图指南 Google网站打分工具 给文章自动添加空格 编程沉思录之个人博客及公众号常用工具</article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/golang-study/>Golang学习资源收集</a></h1><time datetime=2020-05-08T14:43:48+0800 class=post-date>May 8, 2020</time><ul class=tags><li class=tag-golang><a href=https://yezihack.github.io/tags/golang>golang</a></li><li class=tag-golang进阶><a href=https://yezihack.github.io/tags/golang%E8%BF%9B%E9%98%B6>golang进阶</a></li><li class=tag-go每日一库><a href=https://yezihack.github.io/tags/go%E6%AF%8F%E6%97%A5%E4%B8%80%E5%BA%93>go每日一库</a></li><li class=tag-分享><a href=https://yezihack.github.io/tags/%E5%88%86%E4%BA%AB>分享</a></li></ul></div>Golang 系列进阶文章 Golang 系列文章 来源: 飞雪无情 Go包管理 Go开发工具 Go Doc 文档 Go 数组 Go 切片 Go Map Go 类型 Go 函数方法 Go 接口 Go 嵌入类型 Go 标志符可见性 Go goroutine Go 并发资源竞争 Go 通道 Go 并发示例-Runner Go 并发示例-Pool Go 读写锁 Go log 日志 Go Writer 和 Reader Go Context Go 单元测试 Go 基准测试 Go 调试 Go 反射 Go Struct Tag Go unsafe 包之内存布局 Go unsafe Pointer Go 后记 Golang 每日一库 Golang 每日一库 来源 darjun flag go-flags go-homedir go-ini cobra viper fsnotify cast log logrus godotenv carbon email dig gojsonq message-bus watermill wire mergo copier jennifer go-cmp buntdb gjson sjson jj govaluate validator gopsutil gentleman plot go-app zap zerolog nutsdb sqlc</article><article class=post><div class=info><h1 class=post-title><a href=https://yezihack.github.io/posts/goz/>Goz学习笔记</a></h1><time datetime=2020-04-28T20:33:51+0800 class=post-date>April 28, 2020</time><ul class=tags><li class=tag-golang><a href=https://yezihack.github.io/tags/golang>golang</a></li><li class=tag-curl><a href=https://yezihack.github.io/tags/curl>curl</a></li><li class=tag-源码分析><a href=https://yezihack.github.io/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90>源码分析</a></li></ul></div>分析 项目四个Go文件, 每个文件仅描述一件事, 思路非常清淅, 故此学习并总结一下里面的精华.
定义Options结构体接受外部定义的配置 定义入口文件, 整个项目的入口, 并返回一个下一层处理的结构体 定义逻辑结构体, 下一层结构体担负着处理逻辑的任务,并返回处理结构的结构体. 定义收尾结构体, 将上一层的处理的结果进行进一步分析,最终展现给用户 入口文件 Goz.go 只初使化了Request结构体. 可以定义初使配置Options, 整个项目所需的配置都在Options结构里 options.go#L6 // NewClient new request object func NewClient(opts ...Options) *Request { req := &amp;Request{} if len(opts) > 0 { req.opts = opts[0] } return req } 配置文件 Options.go 定义了整个项目需要的外部参数 变量首字母都大写 options.go#L6 // Options object type Options struct { BaseURI string Timeout float32 timeout time.Duration Query interface{} Headers map[string]interface{} Cookies interface{} FormParams map[string]interface{} JSON interface{} Proxy string } 核心处理文件 Request.<div class=read-more-link><a href=/posts/goz/>Read More…</a></div></article></div><hr><div class=footer><nav id=page-nav><a href=/page/16/ rel=prev class="extend prev">&#171; Previous</a>
<a href=/>1</a>
<a href=/page/2/>2</a>
<a href=/page/3/>3</a>
<a href=/page/4/>4</a>
<a href=/page/5/>5</a>
<a href=/page/6/>6</a>
<a href=/page/7/>7</a>
<a href=/page/8/>8</a>
<a href=/page/9/>9</a>
<a href=/page/10/>10</a>
<a href=/page/11/>11</a>
<a href=/page/12/>12</a>
<a href=/page/13/>13</a>
<a href=/page/14/>14</a>
<a href=/page/15/>15</a>
<a href=/page/16/>16</a>
<span class="page-number current">17</span>
<a href=/page/18/>18</a>
<a href=/page/19/>19</a>
<a href=/page/18/ rel=next class="extend next">Next &#187;</a></div></main></div></body></html>